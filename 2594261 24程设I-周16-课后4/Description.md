# 24程设I-周16-课后4

# 描述

你有 $n$ 个盒子在桌子上的一条线上，从左到右编号为1~n 。你的任务是模拟三种操作：

* `1 X Y` 移动盒子编号 `X` 到盒子编号 `Y` 的左边（如果 `X` 已经在 `Y` 的左边则忽略该操作）
* `2 X Y` 移动盒子编号 `X` 到盒子编号 `Y` 的右边（如果 `X` 已经在 `Y` 的右边了就忽略）
* `3 X Y` 交换盒子编号 `X` 与盒子编号 `Y` 的位置

操作保证合法，`X` 不等于 `Y`。

最后输出所有操作结束后，奇数位置的编号的和（位置从 `1` 开始计数）

# 输入

第一行为两个整数 $n,m (1\le n,m\lt 10^5)$，分别表示盒子数量以及操作次数，接下来是 $m$ 行数据，表示操作。

# 输出

输出操作结束后奇数位置的编号的和

# 输入示例

```
5 3
1 3 5
2 2 4
3 1 4
```

# 输出示例

```
11
```

# Hint

* **双链表**

为优化遍历时间，本题可能需要用到双链表，典型的双链表结点结构如下：

```
typedef struct Node {
    int val;                // 数据域，这里以int类型为例，可以根据需要更改为其他类型
    struct Node* prev;       // 指向前一个节点的指针
    struct Node* next;       // 指向下一个节点的指针
} Node;
```

每个节点包含三个部分：数据和两个指针域。这两个指针分别指向**前一个节点**和**后一个节点**。这种结构使得双链表可以从两个方向进行遍历，即正向（从头到尾）和反向（从尾到头）。

* **样例说明**

代表一开始的盒子序列为 {1,2,3,4,5}。3 代表接下来有 3 个操作。


* `1 3 5` 操作：将 3 号盒子放在 5 号盒子左边，盒子序列变为 {1,2,4,3,5}。
* `2 2 4` 操作：将 2 号盒子放在 4 号盒子右边，盒子序列变为 {1,4,2,3,5}。
* `3 1 4` 操作：将 1 号盒子与 4 号盒子交换，盒子序列变为 {4,1,2,3,5}。

此时奇数位置的编号分别为 4,2,5，输出 11。

